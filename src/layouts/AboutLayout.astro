---
import Layout from "./Layout.astro";
import Sectionhead from "src/components/sectionhead.astro";
import { $activeAboutItem } from "src/shared/store.js";
import { getCollection } from "astro:content";

const aboutPosts = await getCollection("about");

type Props = {
  title: string;
};

const { title }: Props = Astro.props;
// console.log("ABOUT POSTS", aboutPosts[activeAboutItem.get()].data.menu_label);
---

<Layout title={title}>
  <div class="align-left ml-8 mt-4">
    <h1
      class="text-4xl lg:text-5xl font-bold lg:tracking-tight"
      id="about-page-heading"
    >
      {aboutPosts[$activeAboutItem.get()].data.menu_label || "About Us"}
    </h1>
    <p class="text-lg mt-4 text-slate-600">
      <h2 class="">Helios Energy</h2>
    </p>
  </div>
  <hr class="w-[25%] ml-8 bg-black border-none h-[1px]" />
  <div
    class="flex flex-inline w-fit gap-8 mt-0 justify-start
    max-w-screen-sm
    min-w-screen-sm
    xl:max-w-screen-md
    xl:min-w-screen-md"
  >
    <slot />
  </div>
</Layout>
<script type="module" define:vars={{ aboutPosts }}>
  import { $activeAboutItem } from "/src/shared/store.js";
  const heading = document.getElementById("about-page-heading");
  $activeAboutItem.subscribe((index) => {
    heading.innerHTML = aboutPosts[index].data.menu_label;
  });
</script>
